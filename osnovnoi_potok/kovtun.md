# Алгоритмы и закономерности аукционов систем контекстной рекламы

###### Автор: Владимир Ковтун, Эксперт по K50, [K50](http://k50.ru) #####
###### [Обсуждение](http://on.fb.me/1raC6zc) / [презентация](http://slidesha.re/1pnbpmC)


В данной статье рассмотрена основные алгоритмы системы Яндекс.Директ. В процессе расмотрения было выявлены основные факторы, влияющие на ценообразование на поиске. Также были выявлены некоторые факторы, влияющие на прогнозное значение CTR рекламодателя.

### Введение

Многие SEO-специалисты тратят огромные объемы ресурсов на определение главенствующих критериев ранжирования поисковой выдачи. Они строят целые теории касательно этих факторов, проводят масштабные исследования.

Когда дело касается контекстной рекламы, число таких инициатив резко снижается, несмотря на богатое поле для исследований.

Моя статья отностится к одной из тех немногочисленных инициатив - я хочу детально разобрать алгоритмы аукционов систем контекстной рекламы и оценить уровень влияния некоторых факторов на ценообразование внутри систем. Поскольку тема весьма обширная, хочу начать с изучения особенностей наиболее популярной в России системы - Яндекс.Директ.

Безусловно, большинство из нас представляет в общих чертах, что есть некие объявления, которые показываются на поиске и что где-то можно назначать ставку. Есть ещё какой-то параметр кликабельности, который каким-то образом на что-то влияет. Однако, не зря говорят, что “дьявол кроется в деталях”. Поэтому приступим к погружению в теорию.

### Алгоритм аукциона системы Яндекс.Директ

Итак, есть поиск Яндекса, на страницах которого мы хотим показывать свои объявления. Для объявлений существует несколько специально ответденных мест (блоки для показа объявлений):


* Блок спецразмещения — наиболее эффективный по количеству кликов — отображается над результатами поиска и содержит до трех объявлений.

* Блок гарантированных показов — справа либо под результатами поиска, содержит до четырех объявлений.

* Блок динамических показов — до 5 объявлений, не попавших в Гарантированные показы справа, динамически (то есть, чередуясь) на позициях под Гарантированными показами.


Выглядит все это примерно, как на картинке (пример для запроса “контекстная реклама яндекс.директ”):

![](https://lh5.googleusercontent.com/ZNXbjni6dVfi6VJa_Q04s8WdcN9sMLOl1z1MaDIKxmQ1QRX-u-JJ5zQv_qUOiPmhgfxikEM7u7U56Oty6fJQjVeRiQZM7c7wF9Ji6oYRoj2mFYje2_gavAv1aMg9O9zDZg)

В этом примере видны все 3 блока размещения объявлений. Возможны ситуации, когда блок гарантированных находится внизу. В этому случае блок динамических показов отсутствует на первой странице.

Итак, теперь мы знаем, что есть 3 блока размещения, в которых может показываться наше объявление.Теперь давайте разбираться, как туда попасть.

### Участники аукциона

Поскольку желающих размещать свои объявления на поиске много, а количество мест для размещения ограничено, каждый раз при вводе запроса в строку пользователем места разыгрываются в формате аукциона.

Чтобы участвовать в аукционе, вызванного поисковым запросом пользователя, рекламодатель должен удовлетворять нескольким условиям:

а) ключевое слово рекламодателя должно включать в себя этот поисковый запрос либо должно быть релевантно ему (в случае использования опции “показ по дополнительным релевантным фразам)

б) объявления рекламодателя должны быть настроены на показы в регионе ввода поискового запроса

в) объявления рекламодателя должны быть активны во время ввода поискового запроса

г) макс. цена за клик для ключевого слова рекламодателя должна быть не ниже минимальной цены для показа на поиске (подробности ниже).

После определения участников, можем перейти к рассмотрению процесса проведения аукциона. Его можно разбить на 3 этапа:

### Первый этап аукциона

Каждый участник назначает максимальную цену, которую он готов заплатить за клик по ключевому слову. Назначение цены проходит в закрытом формате (участник аукциона не видит ставок своих конкурентов). Для каждого аукциона Яндекс собирает значения максимальных цен за клик ключевых слов участников.

Для каждого слова яндекс вычисляет показатель кликабельности на основе исторических данных рекламодателя. Формула показателя кликабельности (он же CTR) не должна вызывать удивления:

![](https://lh3.googleusercontent.com/xS5Aoq4aVnQwNulhGmEtFMELL53_5szA3Z_xfuv6bUxAMZ6_roo3vqgeDxJCS5KaybFeDxDV4XeDIx1M4BASFRILUS8Nh_j3wLgPbZ2TZaV_obkYwars2DsySrWFJKtu6g)

Она представляет собой отношение числа кликов по ключевому слову, к числу показов по данному ключевому слову.

Замечу, что для нужд Яндекса при расчете кликабельности учитываются данные за последние 28 дней, в течение которых осуществлялся показ объявлений по ключевому слову. В случае недостаточного количества исторических данных Яндекс использует прогнозное значение в качестве текущего показателя кликабельности ключевого слова. Также яндекс учитывает отдельный CTR для разных блоков размещения. Будем предполагать, что используется один и тот же CTR для разных блоков размещение, если не написано обратное.

Также каждый участник предварительно выбирает стратегию назначения показов, которая в дальнейшем будет влиять на списываемую ставку рекламодателя в аукционе, а также на блок размещения (некоторые стратегии позволяют отключить показы в спецразмещении).

Итак, на этом этапе Яндекс собирает данные по кликабельности (CTR), максимальной цене за клик (**MaxCPC**) для каждого участника аукциона и стратегии назначения показов.


### Второй этап аукциона

Объявления отбираются для показа в блоки размещения объявлений.

Для этого Яндекс считает их произведение кликабельности и цены за клик. Будем называть это произведение** рейтингом объявления** и обозначать как adRank:

 ![](https://lh6.googleusercontent.com/A9gbwySA0JOBSQXvIWX89ebZiB0KsOTD8zSfB3r2gfTThOmxMO0XcIovGWdiFrbb17CAS3jzX8QUHr_nv89l8g0C7OgmRAoiK2traTrr1CnHxuyHJF_0drUGuOh_8fbOuw)

В блок спецразмещения попадают первые 3 объявления с наибольшим рейтингом, превосходящим минимальное значение рейтинга, необходимое для входа в спецразмещение (обозначим его за **specRank**). Поскольку объявления с рейтингом ниже **specRank** не участвуют в отборе в блок спецразмещения, возможна ситуация, когда на странице поиска показывается много объявлений, но ни одно из них не попадает в спецразмещение.

Первые 4 объявление с наибольшим рейтингом, не попавшие в спецразмещение, попадают в блок гарантированных показов.

Объявления, не попавшие в блок спецразмещения и блок гарантированных показов, могут попасть в блок динамических показов.

Возвращаясь к нашему изначальному примеру, можем сделать следующие выводы:

![](https://lh6.googleusercontent.com/HXTm_zqu79qkeC5K5Ddp_o-5Kj842IYXrq7jxXWUb8aGoVaeidj0OhW6d2O4rTs9o8BsmGzwe4yPRlIAjNEFJX8LAhgaVa1iUefZTxwyBxVXxriVznI9dqAJF8VoFUVCLQ)

Распределение по позициям в действии

Итак, на этом этапе, Яндекс определяет рейтинг каждого объявления, на основе которого объявления отбирается в блоки размещения показов.

Важно понимать, что на этом этапе становится **известна минимальная цена за клик, необходимая для входа в блок.** Это минимальная цена, необходимая для того, чтобы рейтинг рекламодателей превысил рейтинг ближайших конкурентов. Важную роль в формировании минимальной цены играет CTR объявления. Далее мы изучем её подробнее.


### Третий этап аукциона
Объявления располагаются по позициям внутри блоков.

Каждому рекламодателю, отобранному в блок Спецразмещения или блок Гарантированных показов, в зависимости от его стратегии, его CTR и рейтинга конкурентов показов назначается цена на поиске **CPC** (далее по тексту - ставка), с которой он будет участвовать в распределении по позициям внутри блока размещения. Далее в зависимости от стратегий и ставок конкурентов для рекламодателя формируется фактическое значение цены за клик (далее по тексту - **списываемая ставка**), которое будет списано с счета при клике по объявлению. Будем обозначать списываемую ставку как **FinalCPC**.  Объявления, отобранные в Спецразмещение и в **Гарантированные показы,** располагаются **в порядке убывания этой ставки.**

Объявления, отобранные в **блок динамических показов, располагаются в порядке убывания их рейтинга.**

Теперь, взглянув на выдачу яндеса, можно легко сделать вывод, кто будет платить больше:

![](https://lh5.googleusercontent.com/daL6pzVBN3BQQ6w7CKc3fVI8Vj6481ZRFMvgaSrGfx5EXVA8Mt3HDl6mJ0gFqGIvcJ9r4jT0LfEA9wZBIzuCXYb-Rw3P6XCElaThh3F1h27zuEgQYGQ8yZJ0dNhsFti_OA)


### Алгоритмы назначения Ставки

Итак, на 3 этапе аукциона рекламодатели располагаются внутри блока в порядке убывания ставки **CPC**, которая зависит от выбранной стратегии показов объявлений на поиске.

Яндекс предлагает довольно много различных стратегий, но все они используют 2 основные механики назначения ставок внутри блока размещения: **показ на наивысшей доступной позиции и показ по минимальной цене.**

#### Показ на наивысшей доступной позиции (без автоброкера)

Исторически самая первая механика назначения ставок. Возможно, поэтому используется большинством стратегий показов яндекса. Логика назначения ставок простая - плати столько, сколько поставил.

То есть показ на наивысшей доступной позиции сигнализирует Яндексу, что для данного рекламодателя следует назначить **максимальную ставку,** позволяющую показываться в блоке на **максимально допустимой позиции.** Тогда списываемая ставка рекламодателя с максимальной ценой за клик MaxCPC и кликабельностью CTR будет равна:

![](https://lh3.googleusercontent.com/o2rIGov7VTWbzJcKTbNet_ta3F2v3kb16JvQqszn9e_4BqUGLQHZ2CUD7MOVk0C9BjwU61bIzqZs2sz1W5erKLi_aHAOuO3R7hHhgQVWx_5_4pTObgNSyUMTDauoY_Gybw)


Да, все верно. **Рекламодатель всегда будет платить максимально возможную цену** вне зависимости от CTR и своей позиции. Поэтому при использовании данной механики важно правильно выбирать максимальную цену за клик. Поскольку в разный момент времени участвует разное количество участников, цена за клик, требуемая для входа в блоки спецразмещения и гарантии, может сильно меняться в течение дня.

Поэтому при использовании данной механики показов важно поддерживать ставку актуальной. Для этого полезны всяческие биддеры, позволяющие с определенной периодичностью обновлять ставку.


#### Показ на наивысшей доступной позиции (с автоброкером)

![](https://lh6.googleusercontent.com/kyIXZQdRqvcUY3iigkcUiW0f8LPEoGzD9Gv_Tb6OIXqZ0qt7viPju3B-ddIK3l1Jz7iC63XdRTOXfDja-yP2mXu1wpN3FyFNk1iRNTJy81U2Q5t8UFLPocgl7eD3SNdLBQ)


Обычная реакция на следующий раздел

На следующем этапе развития яндекс внедрил систему автоматической оптимизации ставки. Данная система называет автоброкер.

При активации автоброкера Яндекс будет назначать** минимальную достаточную ставку**, чтобы обеспечить объявлению **наилучшую возможную** позицию внутри блока.

Пронумируем позиции в блоках размещения, полагая, что позиции с номерами 1,2,3 соответствуют 1,2,3 местам в спецразмещении, а позиции с номерами 4,5,6,7 - 1,2,3,4 позициям в блоке гарантированных показов, 9, 10... - 1,2… места в блоке динамических показов. Тогда ставка рекламодателя на 3 месте в гарантии будет обозначаться CPC6, его кликабельность - CTR6. Отдельно пронумеруем рейтинги рекламодателей в порядке убываня. Тогда четвертый по величине рейтинг будет обозначен как **adRank4**, восьмой по величине - **adRank8**. Обозначим за **Increment** шаг торгов - минимально возможное увеличение ставки. Тогда списываемую ставку рекламодателя, использующего наивысшую доступную позицию с автоброкером, можно записать в следующем виде:

![](https://lh3.googleusercontent.com/Ys9RBpJT6M3qulinpStE_TMhuCvNPEWQwuQAoWwaHG2uh31-Bx045ZoV4KYoAbxiRR6nSyHQQ5QOoRbiPtnd1QWbf0qMzgwR6EWDM5ToNwzS7uMpWDqiqNed1G3FMh1AUQ)

Теперь давайте разберемся, что же в этой формуле написано.

Первая строка - **списываемая ставка для рекламодателя на первой/второй позиции спецразмещения**. Она представляет собой максимум среди трех значений:

* Минимальной ставки, превышающая ставку рекламодателя на 1 позицию ниже. Она представляет собой сумму рекламодателя на 1 позицию ниже и шаг торговли: ![](https://lh3.googleusercontent.com/bOn5SJTOkOfk03ujGzFXFZXT4kOL3KTlG47lrQHIUexhEgRUI7QHPK-mEs1zpDTxmeZz6_3tAuaiGXN_QYHR1tEsNSTTNtb4xuUza0nzSDUcFgvLsOnOoUzikwJ64BC0jA)


* Минимальной цены за клик, необходимой для попадания в блок спецразмещения. То есть это минимальная цена за клик, которая позволяет рекламодателю превысить четвертый по величине рейтинг (четвертый потому что, наш рекламодатель должен находиться в Top 3 рейтинга объявлений для попадания в спецразмещение).
Вычислить её можно по формуле: ![](https://lh4.googleusercontent.com/O_8geILEoD82ciPgwGh-OWysRpJmAbKZkv15UWiy-v4-BtGgJbtD-OemCZjK2o4VThE7YIC-Qub7cn3iIOyYmVRlDxigDJYxMcdug2aJzeBqxQtaNZnWjLoBJwS6Fj_iyA)


* Минимальной цены за клик, необходимой для преодоления порогового значения рейтинга для спецразмещения: ![](https://lh4.googleusercontent.com/3E-r0Rizpu0PEiHGSVKqF61NjE8iTx6bxX4C9tuVMX5Kb5bzTAmXJFan7ddR2q5MfVFYJL-G7DrxwW2D8jGhoKaitojrLZOghs91JhtS9LqmKaiQpsUWETeae18SirKC9g)


Следющая строка - **списываемая ставка для рекламодателя на 3 месте спецразмещения.** Это максимум среди двух величин:


* Минимальной цены за клик, необходимой для попадания в блок спецразмешения.


* Минимальной цены за клик, необходимой для преодоления порогового значения рейтинга для спецразмещения.


Третья строка схожа с первой и показывает **списываемая ставка для рекламодателей на 1, 2, 3 местах в блоке гарантированных показов**. Она представляет собой максимум среди двух значений:


* Минимальной ставки, превышающая ставку рекламодателя на 1 позицию ниже.


* Минимальной цены за клик, необходимой для попадания в блок гарантированных показов. То есть это минимальная цена за клик, которая позволяет рекламодателю превысить восьмой по величине рейтинг (восьмой потому что, наш рекламодатель должен находиться в Top 7 рейтинга объявлений для попадания в блок гарантии).



Четвертая строка - цена для рекламодателя **на последнем месте в блоке гарантированных показов либо в блоке динамических показов.** Чтобы рекламодателю попасть в блок гарантированных показов, его рейтинг должен находиться в top 7, то есть ему нужно поставить минимальную цену, необходимую для первышения 7 по величине рейтинга среди конкурентов (восьмого по величине в общем зачете). С другой стороны, поскольку в блоке динамических показов объявления выстраиваются в порядке убывания рейтинга (чем ниже рейтинг, тем ниже позиция), рекламодателю достаточно заплатить минимальную цену, позволяющую превысить рейтинг нижестоящего конкурента.


Теперь, когда вы знаете, сколько будет платить рекламодатель в зависимости от наличия автоброкера, возникает вопрос в его необходимости. О результате можно судить на основе графика почасового изменения ставок, любезно предоставленном яндексом.

![](https://lh6.googleusercontent.com/7l2Yt8Oo05Yokm_henZpbziPjn4z7SQtX3tAqk77_p32bJQRo2pCSr8SN0xNHnPwdsU2Qc6tPZma_zKBZCvivIJZWbIqnAoldPmWpqx0UU8g8AqgEcbvLJrjV8CQDgB5pg)


Здесь ставка рекламодателя - ставка при использовании стратегии “наивысшая доступная позиция”, “списываемая ставка” - ставка после оптимизации цены автоброкером.


Очевидно, результат использования автоброкера приносит свои плоды в виде сэкономленных бюджетов рекламодателей.


Однако, существует одна ситуация, в которой проявляется основной недостаток стратегии “наивысшая доступная позиция” и против которой автоброкер бессилен.


Напомню, что автоброкер выставляет **минимальную достаточную ставку,** чтобы обеспечить объявлению **наилучшую возможную позицию** внутри блока. Находясь на позициях, выше минимальной в блоке, рекламодатель платит ставку, которая зависит от ставки нижестоящего конкурента. Хитрый конкурент может выбрать свою цену за клик так, чтобы сделать ставку нашего рекламодателя **максимально возможной.** То есть по сути имитировать стратегию **“показ на наивысшей доступной позиции без использования автоброкера”**. Данную махинацию часто называют подпоркой.

#### Показ по минимальной цене
Конечно, яндекс не переставал развивать свой продукт (чего не скажешь про него в последнее время) и сделал доступным новую механику назначения ставок.


При использовании данной механики яндекс будет назначать **минимальную достаточную ставку,** чтобы обеспечить объявлению **показ объявления внутри блока размещения.** То есть объявление всегда будет показываться в блоке по минимальной допустимой цене (цене, позволяющей обогнать конкурентов в рейтинге).


Используя введенные ранее обозначения, можем записать значение списываемой ставки в общем виде (пример для стратегии “показ в блоке по минимальной цене: в спецразмещении и гарантии”):

![](https://lh5.googleusercontent.com/1j6HRu5zyZgJZ44mfa6SbTNX7HbnI-bBkjzPqfoQlV-3m20g58lUXFxf5nwJlK78hg5O5AgRTypXpBpF4j08cPjflozYDJMcYhDCGkUxE0eVvaLj_kTH7hOd-Luw0GTGBA)


Первая строка - **списываемая ставка в спецразмещении.** Она представляет собой максимум среди двух значений:


* Минимальной цены за клик, необходимой для попадания в блок спецразмешения.


* Минимальной цены за клик, необходимой для преодоления порогового значения рейтинга для спецразмещения.


Вторая строка - **списываемая ставка в блоке гарантированных показов.** Она представляет собой минимальную цену за клик для попадания в блок гарантированных показов

Последняя строка -  **списываемая ставка в блоке динамических показов.**

Поскольку в блоке динамических показов рекламодатели выстраиваются в порядке убывания рейтинга (чем ниже рейтинг, тем ниже позиция), рекламодатель будет платить минимальную цену, позволяющую превысить рейтинг нижестоящего конкурента.

Так чем же хороша эта стратегия? Ответ прост - **объявление рекламодателя всегда будет показываться в блоке по минимальной для него цене.** Это значит, рекламодатель сэкономит **максимальную возможную величину бюджета.**

Данная стратегия обходит серьезный недостаток автоброкера. Поскольку рекламодатель не может тратить больше, чем свою минимальную цену, **подпорка не принесет ему ущерба.** Для того, чтобы подпереть рекламодателя, конкурент должен использовать показ по наивысшей доступной позиции, рискуя попасть на собственную уловку.

### Минимальная цена за клик для рекламодателя на вход в блок

Прошу обратить особое внимание на фразу “минимальная цена за клик **для рекламодателя”**. Для понимания принципов работы аукциона яндекса крайне важно осознавать, что** цена за вход в блок индивидуальна для рекламодателя.** Более того, она легко **может отличаться в несколько раз** по сравнению с конкурентами.

![](https://lh4.googleusercontent.com/leR6ZS7o-fTvrd67txZ1xu7b4u5aTNiIWZg2aMgZZiPA57yvib-IlArJWSeoNUxVwLAe3Qpx8ESBvdbv2kxjrsXwojSLgLfWqTm1A4RFn0Og2pRDd-eLkcRKBXUzcTy4jw)

Жизнь никогда не будет прежней

Каждый рекламодатель может видеть свои примерные минимальные цены за вход в интерфейсе. Важно понимать, что **минимальная цена за вход** в блок и **цена за** **последнее место в блоке** - это разные величины, которые в некоторых случаях могут совпадать.

![](https://lh5.googleusercontent.com/LdN419TCnn-54t-p2Pl5xvsALTTgwviUO3xkzfxI5LvhzcONqIgN7-N6eRmJRpX9E2sRySD_CADqiXYZi2kejLp4M5UwhL92B3qe7Rdeirs6rcKUrLsNPb0KyFogSrQJOg)

Минимальная цена за вход и цена за последнее место - это не одно и то же

Ещё раз, когда рекламодатель назначает ставку, равную минимальной цене за вход, он не обязательно будет показываться на последней позиции, поскольку ставка конкурентов может быть ниже минимальной цены рекламодателя.

В случаях, когда рейтинг конкурентов довольно высокий, **минимальная ставка может сразу обеспечивать первое место в блоке.** То есть для того, чтобы рейтинг рекламодателя позволил ему попасть в блок, ему потребуется назначить ставку, превышающую ставку конкурентов. Поскольку объявления внутри блоков располагаются в порядке убывания цены за клик, рекламодетль будет показываться на первой позиции. В этом случае **в интерфейсе цена за вход в блок будет совпадать с ценой за первое место.**

![](https://lh5.googleusercontent.com/0mxzwJgUzhba9WiWGNz6Z7fotP8dn9flkbDivFgrXPKsubXCjmdMwG-qchtRQRwSHxpADyXtEk9q_NEl3s4P5bYMvGw8eG8Dzc0aYQo_-lUqsp7aGX4VpMOhf-yoTTwYXQ)

Цена за вход сразу обеспечивает первое место в блоке

Как же уменьшить минимальную цену? Для этого следует понимать, от каких параметров она зависит.

На формирование минимальной цены за вход в блок **влияют** следующие параметры: **CTR рекламодателя, CTR конкурентов, Цены за клик конкурентов и количества конкурентов.** На формирование минимальной цены для входа в спецразмещение **дополнительно влияет пороговое значение рейтинга для входа в спецрзамещение.**


Поскольку мы не можем менять цены за клик конкурентов и, тем более, их CTR, для снижения минимальной цены за клик следует работать с оставшимися двумя параметрами.


Я не буду описывать способы повышения CTR, поскольку этот процесс индивидуальный. Замечу лишь, что при недостаточном количестве данных яндекс использует **прогнозное значение CTR**. Ниже будет рассказано про некоторые факторы, влияющие на его значение.


Уровень конкуренции зависит от **региона, дня недели, времени суток и уровня популярности ключевого слова **(здесь подразумевается его частотность). Поэтому уточнение этих параметров также позволяет снизить минимальные цены за вход в блок.


### Цена за первое место в блоке

Наряду с минимальными ценами за вход в блок, яндекс отображает информацию ценах, необходимых для попадания на первую позицию.

Важно понимать, что **цена за первое место в блоке и максимальная цена за клик конкурента с наибольшей ставкой** - это разные значения.


![](https://lh3.googleusercontent.com/tf8orKHnnn-5BJ2htfxcYHwrmye-_DbcFPbpJIrMQMwvBwTz42q-xomjfroHL1oKs_Bp0mg7LjGvzDrHdV0vOGP0ditV6u9bmTqN-zSNCUgGjBTSg81AS-bbpG-NNQCebQ)

Цена за первое место и максимальная цена за клик конкурента - разные вещи


Ранее мы выяснили, что рекламодатель может находиться на первом месте по своей минимальной цене. Если наша минимальная цена за клик ниже минимальной цены такого рекламодателя, мы будем показываться на более низких позициях. В интерфейсе будет отображаться ставка, необходимая для преодоления минимальной цены за клик конкурента. При этом стратегия такого конкурента может быть любой. Поэтому подпирая цену за первое место, мы не можем гарантировать, что конкурент будет платить больше обычного. То есть **подпирать конкурентов на основе данных о цене первого места бессмысленно.**

Для использования подпорки необходимо наличие информации о стратегии конкурентов. Поскольку эта информация не лежит в открытом доступе, выставление подпорок становится похожим на лотерею. Более того, недобросовестный **рекламодатель рискует навредить себе**, поскольку для подпирания необходимо использовать стратегию “показ по наивысшей доступной позиции”.


### Оптимальная стратегия показа


Под оптимальной стратегией показа подразумевается стратегия, при использовании которой рекламодатель получить **максимальный ожидаемый выигрыш.** Под выигрышем подразумевается разница между ценностью кликов и стоимостью за эти клики. Так, выигрыш для одного клика (**ClickProfit**) будет равен разнице его ценности (сколько получит от этого клика - **ClickValue**) и списываемой ставки (**FinalCPC**)


![](https://lh3.googleusercontent.com/2G2oKjLKPSV-KsXSSDI5zdfSI_QEqnCZrDlSmUcc6nuC6l67GvRMsnhwaqfY5olti2QKRJ1M2G0FdozZXx-AXMT9PxB8T-sSF_ee3mVwuwLOMuxl5JzSBAolvjtby9UCeg)

Выигрыш рекламодателя от клика

Тогда выигрыш при клике ключевого слова при использовании оптимальной стратегии будет иметь вид:

![](https://lh5.googleusercontent.com/jw7ELD-ocmfIqNlp-RaSANQ56HeP74CZbe3jNCzXbu5t2xsi-f9-K5E2UunGw1Hzg817HMgt-rtWpcdrTLxarYB16gXx5HmelrOQckSR1HBGgRD8tFf5ZWDpwdvz4OMQSA)

где E(ClickValue) - ожидаемое значение ценности от клика по ключевому слова, E(FinalCPC) - ожидаемое значение списываемой ставки.

Поскольку для **ключевого слова ожидаемая ценность клика не зависит от стратегии показов,** использование стратегии будет влиять на итоговый выигрыш только через **списываемую ставку.** Мы знаем, что минимальную списываемую ставку обеспечит стратегия, показывающая объявление в блоке по минимальной цене. Поэтому оптимальной будет стратегия, использующая эту механику в наибольшем количестве блоков размещения. То есть **оптимальная стратегия** для использования в яндексе - **показ в блоке по минимальной цене: в спецразмещении и гарантии.**

Может возникнуть ситуация, когда результат расчета по данной формуле не соответствует ожиданиям рекламодателя. Например, на основе данной ценности могли получить, что вычисленная ставка не позволяет показываться по этому слову в спецразмещении, когда рекламодатель хочет обратного.

Есть 2 причины, из-за которых возможна такая ситуация:

* Рекламодатель **неправильно оценил ценность клика **и его опыт-интуиция подсказывают ему верное решение.


* Рекламодатель **правильно оценил ценность клика и его обманывает собственная интуиция.**


Поэтому крайне важно правильно считать ценность клика. Для этого следует учитывать данные по **вашим показателям эффективности**, которые могут быть абсолютно разными в зависимости от поставленных задач.

### Аукцион в действии

![](https://lh3.googleusercontent.com/uIZu5eNxFSxSNLMXAyNM-2KM_4kk_pW5UUpRkNtwGW31uTpH8it-aZY0QFsLx4aagOsoHUTIe0EAtVvO1EXtm-uFffUInE4gyjfuwAfFGY5lKInYa3FIF9kKlB3QqMbJqQ)

Наконец-то что-то понятное


Безусловно, одной теорией сыт не будешь, поэтому предлагаю немного отвлечься на примеры расчета ставок. Для этого рассмотрим несколько ситуаций с одинаковым исходом:

![](https://lh3.googleusercontent.com/H6_6GV6FE17uJ_J4Nn4HmOAN2izVL0OLXaIiCucm5UbtuQY1w2owQYaz9lsCHgzH3LG503XSzr0OkEuuNxZ9FaQm0Iq21SxXHNf-UnWehKLnwb4wAPkl0d9khYHLvCPtDA)

То есть в каждом примере рекламодатели оказываются на одних и тех же позициях. Меняются изначальные данные и значения списываемых ставок. Сразу предположим, что рекладмодатели используют автоброкер, если не указано обратное. Также предположим, что минимальная цена для показа на поиске (подробнее читайте в разделе ниже) равна 0.01. Минимальный порог рейтинга для показа в спецразмещении равен 20. Шаг торговли 0.01.


Пример 1



<table><tbody><tr><td>Клиент

</td><td>Стратегия

</td><td>Макс. Цена

</td><td>CTR, %

</td><td>Место

</td><td>Списываемая ставка

</td></tr><tr><td>google.ru

</td><td>Наивысшая позиция

</td><td>10

</td><td>5

</td><td>1C

</td><td>4.01

</td></tr><tr><td>ashmanov.com

</td><td>По мин. цене

</td><td>3

</td><td>7

</td><td>2C

</td><td>2.87

</td></tr><tr><td>kontext-reklama.com

</td><td>По мин. цене

</td><td>3

</td><td>8

</td><td>3C

</td><td>2.51

</td></tr><tr><td>lead-or-call.ru

</td><td>По мин. цене

</td><td>4

</td><td>2

</td><td>1Г

</td><td>2.51

</td></tr><tr><td>elenara.ru

</td><td>Наивысшая позиция

</td><td>2

</td><td>4

</td><td>2Г

</td><td>1.26

</td></tr><tr><td>click.ru

</td><td>По мин. цене

</td><td>4

</td><td>5

</td><td>3Г

</td><td>1.01

</td></tr><tr><td>refakt.ru

</td><td>Наивысшая позиция

</td><td>0.8

</td><td>7

</td><td>4Г

</td><td>0.72

</td></tr><tr><td>context-assist.ru

</td><td>Наивысшая позиция

</td><td>1

</td><td>5

</td><td>1Д

</td><td>0.01

</td></tr></tbody></table>


В этом примере рекламодатель lead-or-call показывается на первой позиции, поскольку у него слишком большая минимальная цена за вход. Несмотря на то, что ashmanov ставит 2.87, google вынужден платить 4.01 (а не 2.88, как могли подумать некоторые), чтоб пробиться в блок спецразмещения. Также видим, что kontext-reklama и ashmanov при одинаковых стратегиях имеют разные минимальные цены за клик (у kontext-reklama она меньше), поэтому kontext-reklama показывается на более низкой позиции. Context-assist платит минимальную цену поиске, поскольку ниже него нет конкурентов. То же самое, но на картинке:

![](https://lh4.googleusercontent.com/tttvkNapNd-VdFrjf1Z3A18d8XFfe9q5KzA7LE5qHR4UNY4uxsY3cMzHxOSuVz-GSKR2f5Tbn4DS2ofOpN08ws4sPjDwJaGkiexC5WJJPgVrEQxzuP4STLGCiYuH32EalQ)

Пример 2



<table><tbody><tr><td>Клиент

</td><td>Стратегия

</td><td>Макс. Цена

</td><td>CTR

</td><td>Место

</td><td>Списываемая ставка

</td></tr><tr><td>google.ru

</td><td>По мин. цене

</td><td>11

</td><td>2

</td><td>1C

</td><td>9.01

</td></tr><tr><td>ashmanov.com

</td><td>Наивысшая позиция

</td><td>3

</td><td>7

</td><td>2C

</td><td>2.59

</td></tr><tr><td>kontext-reklama.com

</td><td>По мин. цене

</td><td>3

</td><td>7

</td><td>3C

</td><td>2.58

</td></tr><tr><td>lead-or-call.ru

</td><td>Наивысшая позиция

</td><td>9.1

</td><td>1

</td><td>1Г

</td><td>9.1

</td></tr><tr><td>elenara.ru

</td><td>Наивысшая позиция

</td><td>9

</td><td>2

</td><td>2Г

</td><td>5.01

</td></tr><tr><td>click.ru

</td><td>Наивысшая позиция без автоброкера

</td><td>5

</td><td>3

</td><td>3Г

</td><td>5

</td></tr><tr><td>refakt.ru

</td><td>По мин. цене

</td><td>3

</td><td>6

</td><td>4Г

</td><td>0.84

</td></tr><tr><td>context-assist.ru

</td><td>По мин. цене

</td><td>2

</td><td>2.5

</td><td>1Д

</td><td>0.01

</td></tr></tbody></table>


В этой ситуации google вынужден платить целых 9.01, несмотря на то, что максимальная цена ближайшего конкурента всего 3. Теперь ashmanov использует наивысшую позицию и платит меньше, чем в прошлый раз, поскольку рейтинг конкурентов снизился и мин. цена kontext-reklama снизилась. Click решил отключить автоброкер и поэтому, платит 5 (свою макс. цену за клик), elenara решает подпереть lead-or-call и это получается, поскольку lead-or-call использует показ по наивысшей позиции. Context-assist платит минимальную цену поиске, поскольку ниже него нет конкурентов. То же самое, но на картинке:

![](https://lh5.googleusercontent.com/ae0EPcgpoeLFYNdVlo3vV-4sMXuinanxHH3lIn-Y_eVHr8Kqf-8wicF5ckvoxKqf0VrcMboJZOb96m4l2fogkOjYf8I5jLHY7F0SxYDgZajTrOiLIOoASqhOGCvRtFF1tQ)

Из примеров можно понять, что ситуации могут быть довольно разные, при этом посмотрев на свою статистику, клиент далеко не всегда может понять, насколько он лучше или хуже конкурентов.


### Актуальность цен в интерфейсе яндекса

Теперь, когда мы изучили самые основные вещи, немного углубимся в некоторые особенности, которые могут быть не всегда очевидны.

Первый вопрос - какие именно цены показывает яндекс в интерфейсе?

Казалось бы, ответ довольно очевиден - цены для входа в блок и для показа на первой позиции. Однако, это не совсем так, поскольку **цены для входа в блок и для показа на первой страницы пересчитываются при каждом аукционе. **То есть данные в интерфейсе - это **примерные цены** с учетом данных по ценам, кликабельности потенциальных конкурентов. Потенциальный конкурент - рекламодатель, у которого пересекается **регион показа, ключевое слово** для неостановленного автоматически объявления (если включить эту опцию в настройках кампании).

![](https://lh6.googleusercontent.com/JplabgnHS8hbi2NxFzBkPyul13BTfPzdeju2HA0VmHB8j6p9oBvGIlJcN0KCTc4_Fc-RdnpDdHwOPGiEoHT-vgYBGs_ACgQwePzAJiCB6TiPGiv69Wvj6T-cuUdXbi9goA)Настройка учета автоматически остановленных объявлений конкурентов

Соответственно, цена в интерфейсе будет меняться в зависимости от **региона показа, ключевого слова, ограничения бюджета, ограничения показов по времени суток конкурентов.** И, конечно, при расчете цены будут учитываться данные по ставкам, CTR и стратегиям конкурентов. В связи с этим, цены за клик в интерфейсе будут постоянно меняться в течение суток.

При этом значения цен за клик в инетерфейсе обновляется с определенной периодичностью ([каждые 15 минут](https://direct.yandex.ru/direct/?id=990422)).

Во время экспериментов обнаружил, что для ключевых слов с различным типом соответствия, с минус-словами и без них Яндекс **отображает одинаковые ставки**. Это значит, что **цены за клик в интерфейсе считаются только для фразы в точном соответствии.** Поэтому возможна ситуация, когда рекламодатель показывается по ключевому слову на первой позиции в спецразмещении, но не может попасть в блок гарантии по его подзапросу в силу более ожесточенной конкуренции рекламодателей.


Поэтому чем **лучше сегментирована кампания**, тем **точнее информация о ценах.**

### Минимальная цена для показа на поиске

Следующая метрика, которую я хотел бы осветить в своей статье, называется “**минимальная цена для показа на поиске”**. Это минимальный уровень ставки, при котором объявление может показывается на поиске Яндекса.

Да, для каждого **рекламодателя** (точнее для **фраз группы объявлений рекламодателя**) существует минимальная ставка, которую они должны преодолеть, чтобы показываться на поиске. Как правило, значение этой цены совпадает с минимальной возможной ценой яндекса (30 копеек), но могут возникать ситуации, когда яндекс завышает этот порог для неугодных фраз.

Это может произойти, если алгоритмы яндекса сочтут текущие **уровни эффективности и релевантности** группы объявлений недостаточно высокими. Для подсчета этих уровней он отслеживает два показателя: **коэффициент качества и показатель эффективности.**

**Коэффициент качества** по своей сути является **мерой релевантности** объявления ключевому слову и посадочной странице. В число основных показателей, влияющих на него входят: общая релевантность объявления запросу, статистические данные по объявлению, релевантность объявления странице сайта, на которую ведет ссылка из объявления, и др.

Значение **параметра эффективности**, в свою очередь, показывает, насколько эффективны кампании клиента в целом. В число основных показателей входят статистические данные (Показы, CTR, количество дней активности Рекламных кампаний) агрегированные по рекламируемому домену или номеру телефона (если он указан в "виртуальной визитке").

То есть **минимальная цена на поиске зависит только от показателей рекламодателя**. Более того, после увеличения минимальной цены яндексом далеко не всегда легко вернуть его на прежний уровень. Справка яндекса предлагает крутиться на поиске по более высокой цене до момента её снижения. Вот только процесс может затянуться...

### Прогнозный CTR
Вернемся к изучению цен на вход в блоки Спецразмещения и Гарантированных показов.

Ранее упоминалось, что когда Яндексу недостаточно данных для вычисления фактического CTR рекламодателя, он использует прогнозное значение CTR.

Понимание того, какие факторы и каким образом влияют на значение прогнозного CTR, позволит нам настраивать кампании так, чтобы уже на старте превосходить своих конкурентов.

К сожалению, яндекс не разглашает формулы, используемые для прогноза. Однако, это не мешает нам попробовать выявить наиболее значимые факторы влияния на значение прогнозного CTR.

![](https://lh5.googleusercontent.com/WDC8VDKsWkOOFOjDAofrYOqluJiXyDTozFwiJ7fjR79x5GqqBM7gcJGZ4af_jJTN1ivqUPmz8DTMG_LPRHkw_Oc3C93KTOEXpG8ftirn3O5fJi3IKisSjLTN5gR17Yx1qQ)

Вместо тысячи слов

### Механика проверки гипотез

Механика проверки гипотез о влиянии различных факторов схожа с механикой аб-тестирования.

В различных аккаунтах параллельно создаются различные варианты объявлений. В этих аккаунтах собираются данные по изменению пороговых значений ставок. Поскольку данные по CTR конкурентов и Максимальным цена за клик конкурентов обновляются не очень часто (примерно каждые **15 минут**), можем утверждать, что при изменении нашей выборки объявлений за небольшой период времени, колебание цен на вход, зафиксированное в процессе этих изменений, вызвано изменением прогнозного значения CTR.


Обращаю внимание, что выборка для эксперименты не насчитывает сотни тысяч аккаунтов и, тем более, миллионы объявлений. Количество гипотез получилось довольно небольшим. Тем не менее я рад поделитья с вами своими наблюдениями.

#### Вхождение ключевого слова в заголовок объявления

Первым, что я проверил - это влияние наличия ключевого слова в объявлении на цены для входа в блоки размещения.


Сначала я оценил влияние наличия ключевого слова в заголовке. Итак, **наличие ключевого слова в заголовке увеличивает прогнозный CTR.** При этом, **если ключевое слово стоит в начале заголовка, то прогнозный CTR становится ещё больше.**


#### Вхождение ключевого слова в текст объявления

Безусловно, не стоит забывать про возможность использования ключевых слов в тексте объявления. В целом, **наличие ключевого слова в тексте увеличивает прогнозный CTR.** Поскольку допустимая длина текста заметно выше, можем добавить несколько ключевых слов в текст. И да, **чем больше релевантных фраз в объявлении, тем выше прогнозный CTR (см. замечания ниже).**


Для последнего утверждения есть ряд замечаний:

* Многократное дублирование ключевого слова в тексте объявления не даст требуемого эффекта. В моих примерах Яндекс игнорировал повторные вхождения ключевого слова.

* Использование большого количетва релевантных фраз в объявлении может расцениваться модератором как спам и повлечь блокировку объявления.


#### Вхождение ключевого слова и в текст, и в заголовок объявления

Остается проверить, что будет, если создать объявление с вхождением ключевого и в текст, и в заголовок. Изучив кучу примеров, могу утверждать, что **эффекты от вхождения ключевых слов в заголовок и текст объявления комбинируются.** То есть, если мы добавим ключевое слово и в текст, и в заголовок объявления, то наш прогнозный CTR будет выше, чем при добавлении ключевого слова только в текст либо в заголовок.

Как вы знаете, Яндекс позволяет вставлять ключевые слова с помощью динамической вставки. С другой стороны, мы можем делать это вручную, дробя наши объявления на более узкие группы. По моим данным, **использование ключевого слова немного предпочтительнее использования динамической вставки.** Немного, потому что для большинства примеров это преимущество незначительно (разница в ценах на вход, как правило, не превышает **0.6%**)

#### Влияние восклицательных знаков в тексте

В процессе тестов решил проверить влияние восклицательных знаков на значение прогнозного CTR. Влияние не обнаружено.


#### Влияние наличия быстрых ссылок


Не так давно инженеры Google открыто признали, что AdWords стал учитывать наличие дополнительных ссылок в объявлении при расчете показателя качества.

Я решил проверить, справедливо ли это Яндекс.Директа. Несмотря на то, что наличие быстрых ссылок заметно увеличивает CTR объявления, на старте они не дают никакого прироста. То есть **наличие быстрых ссылок не влияет на прогнозный CTR, даже если в заголовки быстрых ссылок входят ключевые слова.**


#### Влияние рекламируемого домена

В процессе тестирования также наткнулся на любопытную вещь: для одинаковых объявлений с различным доменом цены на вход могут заметно отличаться. При этом учитывается возможный редирект на другой домен.

Да, есть шанс, что вам изначально не повезло с доменом, и придется начинать показывать объявления по не самым лучшим ценам. С другой стороны, фортуна может повернуться в вашу сторону, и цены на объявления будут значительно ниже, чем у некоторых конкурентов (максимальный зафикисрованный разброс цен 120%. То есть домен может помочь снизить цену на вход в 2.2 раза!)

О чем это может говорить:

* Мир несправедлив

* Яндекс учитывает **эффективность** рекламных кампаний, привязанных к **домену**. Это значит, что в расчете прогнозного CTR учитывается **показатель эффективности** (см. раздел “минимальная цена на поиске”)

* Яндекс анализирует **релевантность** домена ключевому слову. Это значит, что в расчете прогнозного CTR учитывается **коэффициент качества**.

Замечу, что все вышеописанные факторы, влияющие на прогнозное значение CTR, так или иначе можно отнести к **показателю эффективности** либо коэффициенту **качества**. Например, вхождение ключевого слова в текст объявление делает его более релевантным, что влияет на **коэффициент качества**.

### Оценка уровня влияния факторов

Уверен, в голове возникают мысли типа:”Да, это влияет. А насколько сильно?”

Понятное дело, что если влияние фактора незначительное, то мало кому захочется тратить время при генерации кампании на то, чтобы учесть его. Общий ответ - влияние каждого фактора зависит от количества ваших конкурентов, их CTR и ставок.


Конечно, такой банальный ответ никого не удивит, поэтому я попробовал зафиксировать часть результатов. В качестве уровня влияния я решил использовать среднее значение расхождения цен (да, среднее, просьба не кидаться помидорами :-) среди тестируемых вариантов объявлений.

Полученные результаты я оформил в виде таблицы. В первой колонке указано, что с чем сравниваем. Так, “Ключевое слово в заголовке vs заголовок без ключевого слова” подразумевает, что сравнивались цены за клик среди объявлений, отличающихся только наличием ключевого слова в заголовке. Если в названии критерия нет противопоставляемого варианта, то проверялись варианты объявления с наличием данного критерия и без него.



<table><tbody><tr><td>Что проверяем

</td><td>Среднее расхождение цен за вход в блок размещения, зафиксированное в ходе эксперимента

</td></tr><tr><td>Ключевое слово в заголовке vs заголовок без ключевого слова

</td><td>131%

</td></tr><tr><td>Ключевое слово в начале заголовка vs ключевое слово не в начале

</td><td>2%

</td></tr><tr><td>Одно ключевое слово в тексте vs

без ключевого слова в тексте

</td><td>51%

</td></tr><tr><td>Дублирование ключевого слова в тексте vs один ключевик

</td><td>0%

</td></tr><tr><td>Несколько релевантных фраз в тексте vs один ключевик

</td><td>27%

</td></tr><tr><td>Ключевое слово в тексте и в заголовке vs ключ в заголовке

</td><td>24%

</td></tr><tr><td>Динамическая вставка vs ключ в ручную

</td><td>-0.6%

</td></tr><tr><td>Наличие восклицательных знаков

</td><td>0.0%

</td></tr><tr><td>Призыв к действию

</td><td>0.0%

</td></tr><tr><td>Слово “ЖМИ!” в тексте

</td><td>0.0%

</td></tr><tr><td>Быстрые ссылки

</td><td>0.0%

</td></tr><tr><td>Разные типы соответствия

</td><td>0.0%

</td></tr><tr><td>Наличие минус-слов

</td><td>0.0%

</td></tr><tr><td>Домен

</td><td>120%

</td></tr></tbody></table>


Скудный набор гипотез



# **
Итак, в этой статье мы детально разобрали модель аукциона Яндекс.Директ. Также мы вникли в некоторые особенности предоставления данных яндексом, оценил факторы влияния ряда параметров.


Безусловно, мною была рассмотрена лишь небольшая часть особенностей данной системы. Моя статья не дает ответ, например на то, когда перестает действовать прогнозный CTR. Более того, я надеюсь, что она побуждает вас задавать себе вопросы касательно особенностей Яндекс.Директа, порождать и проверять новые гипотезы и, конечно, делиться результатами с коллегами. Сделает рынок лучше!


![](https://lh3.googleusercontent.com/DQWGpZcHvJYC2vcevJGEHphINg-G5JOkXplW_5TmXxmcvsdIfoVfstql3jewmOJu5OyyGxkobGPtmLLMw1xIt1-ZucGtWTS1xuncgznR3NpqZiJCrjwb6S_LhYjZOlMc0w)

Ну вы поняли

###### Автор: Владимир Ковтун, Эксперт по K50, [K50](http://k50.ru) #####
###### [Обсуждение](http://on.fb.me/1raC6zc) / [презентация](http://slidesha.re/1pnbpmC)
![Лого организаторов](http://dl.getdropbox.com/u/390630/for-book.png)